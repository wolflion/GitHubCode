

##  内容
+ 有助于编写 **易移植，易调试的程序**。
###  2.1 文件的包含方式
+ `#include <>`和`#include ""`区别；同时 *linux和windows下的情况还不太完全一样*。
    + win下，其实两种执行起来时并没有太大的区别。
    + **linux下，对于自定义的头文件，只能使用`#include ""`格式。**

###  2.2 宏定义
+ 使用宏过程中的要点
    + 宏定义的标识符 **大写**
    + 宏替换不做语法检查，要小心使用
    + 宏替换通常在文件开关部分，作用域为其后的程序，直到用`#undef`命令终止宏定义的使用域。
    + **不要在字符串中使用宏，会按字符串进行处理。**
+ 2.2.1 简单宏替换
    + 简单宏定义的优点
        + 减少魔数的使用，提升代码的可读性 `#define PI 3.1415`
        + 提升代码的可移植性  `#define INT_SIZE  sizeof(int)` *主要是win和linux的移植*
    + 使用简单宏定义要注意的问题
        + `#define  A 10+10`  那么执行`A*A`的时候就有问题。
        + `#undef`的使用  [例E2-02-01.c]
+ 2.2.2 带参数的宏替换  *lionel，这一部分要继续好好看看。*
    + **宏替换在编译前进行，不分配内存**。而函数调用会分配内存。
    + **宏替换不存在类型转换**，相当于函数调用过程中的实参替代形参的过程。
    + **宏展开使源程序变长，而函数调用不会**
    + `(void)(&_x == &_y);`的功能相当于执行一个简单的判断操作，判断x和y的类型是否一致。
    + `#`和`##`的作用分别是啥。
+ 2.2.3 宏嵌套
    + `#define N 3 `  `#define N_CUBE N*N*N`

###  2.3 宏定义常见错误解析
+ 2.3.1 不带参数的宏  [例E2-03-01.c]
    + `#define INT_P int *`  但`INT_P p,p1`时情况会不一样。 
    + `#define N 10;`加;也会被替换
    + **不要在字符串中使用宏，如果宏名出现在字符串中，那么将把宏按照字符串来处理。**
+ 2.3.2 带参数的宏  [例E2-03-02.c]
    + `#define SUM(x,y) x+y` 最好写成`#define SUM(x,y) ((x)+(y))`
    + `#define SUB_ABS(x,y) ((x)>(y)?(x)-(y):(y)-(x))`最好写成`#define SUB_ABS(x,y) ({typeof(x)_x=x;typeof(y)_y=y;(_x)>(_y)?(_x}-(_y):(_y)-(_y);})`  
    + `typeof`操作符，linux环境下支持。

###  2.4 条件编译指令的使用
+ 条件编译指令的3种形式
+ 自己一般最常用的是`#if (0)  #endif`用于整段注释一个文件里的功能。
    + [使用条件编辑指令E2-04-01.c]
+ **常量表达式在编译时求值，所以表达式只能是常量或者已经定义过的标识符，不能是变量，也不能是那些在编译时候求值的操作符，如sizeof。**
    + [例E2-04-02.c]
+ 如果不确定宏是不是已经定义时，可以用如下[代码E2-04-03.c]测试一下。

###  2.5 #pragma指令的使用
+ **曾经使用过`#pragma`指令来设置编译器的字节对齐方式。**
+ 本节`#pragma`的使用：设置编译器的状态或指示编译器完成的一些特定动作。一般形式是`#pragma para`para为参数，有以下参数
    + #pragma message(“消息”)  [例E2-05-01.c]   *编译时的打印输出，即在`gcc -c`时就会输出*
    + #pragma once  如果在头文件的开头部分加入这条指令，那么就能保证头文件只被编译一次。
    + #pragma hdrstop  编译头文件到此为止，后面的无需再编译了。
    + #pragma pack()   [例E2-05-02.c]
        + `#pragma pack(push)`和`#pragma pack(pop)`两者配对，并知道其作用。
        + `#pragma pack(2)`和`#pragma pack()`两者配对，并知道其作用。
    + #pragma warning()
        + `#pragma warning(disable:M N; once:H; error:K)`表示不显示M号和N号的警告信息，H号警告信息只报告一次，把K号警告信息作为一个错误来处理。*当然也可以分拆为三行*

##  收获
+ 2017-10-04到2017-10-05花了不到4个番茄钟，本章看完。留了 **2.2.2**那部分没有看完。
